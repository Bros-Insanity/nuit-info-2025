<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Formulaire complet avec accents et email</title>
</head>
<body>

<h1>Formulaire</h1>

<form id="mainForm">
  <h2>Identit√©</h2>

  <div>
    <label>Genre :</label>
    <label><input type="radio" name="genrePers" value="Homme"> Homme</label>
    <label><input type="radio" name="genrePers" value="Femme"> Femme</label>
    <label><input type="radio" name="genrePers" value="Non-binaire"> Non-binaire</label>
  </div>

  <div>
    <label>Pr√©nom :</label>
    <input type="text" id="prenom" readonly>
    <button type="button" data-compose="prenom">Composer</button>
    <button type="button" data-clear="prenom">Effacer</button>
  </div>

  <div>
    <label>Nom :</label>
    <input type="text" id="nom" readonly>
    <button type="button" data-compose="nom">Composer</button>
    <button type="button" data-clear="nom">Effacer</button>
  </div>

  <div>
    <label>Email :</label>
    <input type="text" id="email" readonly>
    <button type="button" data-compose="email">Composer</button>
    <button type="button" data-clear="email">Effacer</button>
  </div>

  <h2>Villes</h2>

  <div>
    <label>Ville de naissance :</label>
    <input type="text" id="villeN" readonly>
    <button type="button" data-compose="villeN">Composer</button>
    <button type="button" data-clear="villeN">Effacer</button>
  </div>

  <div>
    <label>Ville de r√©sidence :</label>
    <input type="text" id="villeR" readonly>
    <button type="button" data-compose="villeR">Composer</button>
    <button type="button" data-clear="villeR">Effacer</button>
  </div>

  <h2>Parents</h2>

  <div>
    <label>Genre parent 1 :</label>
    <label><input type="radio" name="genreP1" value="Homme"> Homme</label>
    <label><input type="radio" name="genreP1" value="Femme"> Femme</label>
    <label><input type="radio" name="genreP1" value="Non-binaire"> Non-binaire</label>
  </div>

  <div>
    <label>Nom parent 1 :</label>
    <input type="text" id="parent1" readonly>
    <button type="button" data-compose="parent1">Composer</button>
    <button type="button" data-clear="parent1">Effacer</button>
  </div>

  <div>
    <label>Genre parent 2 :</label>
    <label><input type="radio" name="genreP2" value="Homme"> Homme</label>
    <label><input type="radio" name="genreP2" value="Femme"> Femme</label>
    <label><input type="radio" name="genreP2" value="Non-binaire"> Non-binaire</label>
  </div>

  <div>
    <label>Nom parent 2 :</label>
    <input type="text" id="parent2" readonly>
    <button type="button" data-compose="parent2">Composer</button>
    <button type="button" data-clear="parent2">Effacer</button>
  </div>

  <h2>Pays</h2>
  <div>
    <label>Vivez-vous dans l'Empire romain ?</label>
    <label><input type="radio" name="empire" value="oui"> Oui</label>
    <label><input type="radio" name="empire" value="non" checked> Non</label>
  </div>
  <div>
    <label>Pays :</label>
    <select id="pays"></select>
  </div>

  <h2>Date de naissance (calendrier r√©publicain)</h2>
  <div>
    <label>Ann√©e :</label>
    <input type="number" id="repYear" min="1" max="400">
  </div>
  <div>
    <label>Mois :</label>
    <select id="repMonth">
      <option>Vend√©miaire</option><option>Brumaire</option><option>Frimaire</option>
      <option>Niv√¥se</option><option>Pluvi√¥se</option><option>Vent√¥se</option>
      <option>Germinal</option><option>Flor√©al</option><option>Prairial</option>
      <option>Messidor</option><option>Thermidor</option><option>Fructidor</option>
      <option>Sans-culottides</option>
    </select>
  </div>
  <div>
    <label>Jour :</label>
    <select id="repDay"></select>
  </div>
</form>

<!-- Mot Picker -->
<div id="wordPicker" style="display:none;">
  <h3>Choisissez un mot :</h3>
  <div id="wordGrid"></div>
  <button id="closePicker">Fermer</button>
</div>

<script>
const wordPool = {
  A:["Ananas","Ast√©ro√Øde"], B:["Banane","Bateau"], C:["Cactus","Crabe"],
  D:["Dauphin","Dragon"], E:["Escargot","√âl√©phant"], F:["Fraise","Fus√©e"],
  G:["Galet","Guitare"], H:["Hibou","Hache"], I:["Igloo","Iris"],
  J:["Jasmin","Jungle"], K:["Koala","Kiwi"], L:["Lama","Lune"],
  M:["Mangue","Montagne"], N:["Navet","Nuage"], O:["Orange","Oc√©an"],
  P:["Pomme","Panda"], Q:["Quiche","Quartz"], R:["Robot","Rivi√®re"],
  S:["Soleil","Salade"], T:["Tulipe","Tigre"], U:["Uniforme","Urne"],
  V:["Vache","V√©lo"], W:["Wifi","Wasabi"], X:["Xylophone","X√©non"],
  Y:["Yaourt","Y√©ti"], Z:["Z√®bre","Z√©ro"],
  "@": ["@"], ".": ["."], "-": ["-"],"'": ["'"],
  "√©": ["√©"], "√®": ["√®"], "√™": ["√™"], "√´": ["√´"],
  "√†": ["√†"], "√¢": ["√¢"], "√§": ["√§"], "√¥": ["√¥"], "√∂": ["√∂"],
  "√Æ": ["√Æ"], "√Ø": ["√Ø"], "√π": ["√π"], "√ª": ["√ª"], "√ß": ["√ß"]
};

const picker = document.getElementById("wordPicker");
const grid = document.getElementById("wordGrid");
const closeBtn = document.getElementById("closePicker");
let currentField = null;

function capitalizeSmart(text){
  return text
    .toLowerCase()
    .replace(/(^|\s|-)(\S)/g, (m,p1,p2) => p1 + p2.toUpperCase());
}

function openPicker(fieldId){
  currentField = document.getElementById(fieldId);
  renderGrid();
  picker.style.display = "block";
}

function renderGrid(){
  grid.innerHTML = "";
  for (let key in wordPool){
    const words = wordPool[key];
    const word = words[Math.floor(Math.random() * words.length)];
    const btn = document.createElement("button");
    btn.textContent = word;
	btn.onclick = () => {
	  if (!currentField) return;
	  const char = key; // Le caract√®re-cl√©
	  if (currentField.id === "email") {
		currentField.value += char.toLowerCase();
	  } else {
		currentField.value += char.length === 1 ? char : key;
		currentField.value = capitalizeSmart(currentField.value);
	  }
	};
    grid.appendChild(btn);
  }
}

closeBtn.onclick = () => {
  picker.style.display = "none";
  currentField = null;
};

document.querySelectorAll("[data-compose]").forEach(btn=>{
  btn.onclick = () => openPicker(btn.dataset.compose);
});

document.querySelectorAll("[data-clear]").forEach(btn=>{
  btn.onclick = () => {
    const field = document.getElementById(btn.dataset.clear);
    if (field) field.value = "";
  };
});

// Pays
const provinces = ["Gallia Narbonensis","Hispania","Britannia","Asia","Judea"];
const countries = [
  {flag:"üá´üá∑",name:"France"},{flag:"üá©üá™",name:"Allemagne"},
  {flag:"üá™üá∏",name:"Espagne"},{flag:"üáÆüáπ",name:"Italie"},
  {flag:"üá®üá¶",name:"Canada"},{flag:"üá∫üá∏",name:"√âtats-Unis"},
  {flag:"üá≤üá¶",name:"Maroc"},{flag:"üáØüáµ",name:"Japon"}
];

const paysSelect = document.getElementById("pays");

function updateCountries(){
  const isRoman = document.querySelector("input[name='empire']:checked").value === "oui";
  paysSelect.innerHTML = "";
  if (isRoman){
    provinces.forEach(p=>{
      const opt = document.createElement("option");
      opt.textContent = p;
      paysSelect.appendChild(opt);
    });
  } else {
    countries.forEach(c=>{
      const opt = document.createElement("option");
      opt.textContent = c.flag;
      opt.title = c.name;
      paysSelect.appendChild(opt);
    });
  }
}
document.querySelectorAll("input[name='empire']").forEach(r=>r.onchange=updateCountries);
updateCountries();

// Date
const repMonth = document.getElementById("repMonth");
const repDay = document.getElementById("repDay");
function updateDays(){
  const m = repMonth.value;
  const max = m === "Sans-culottides" ? 5 : 30;
  repDay.innerHTML = "";
  for (let i=1;i<=max;i++){
    const opt = document.createElement("option");
    opt.textContent = i;
    repDay.appendChild(opt);
  }
}
repMonth.onchange = updateDays;
updateDays();
</script>

</body>
</html>
